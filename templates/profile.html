{% extends 'base.html' %}

{% block title %}My Profile | MyApp{% endblock %}

{% block content %}
<div class="row justify-content-center mb-5">
  <div class="col-md-6">
    <div class="card shadow-lg rounded-4 p-4" style="background: linear-gradient(145deg, #f8f9fa, #e9ecef);">
      <h2 class="text-center mb-4 fw-bold text-primary" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.1);">
        <i class="bi bi-person-circle"></i> My Profile
      </h2>

      <ul class="list-group list-group-flush mb-3">
        <li class="list-group-item"><i class="bi bi-envelope-fill text-primary"></i> <strong>Email:</strong> {{ user.email }}</li>
      </ul>

      <div class="text-center mt-3 d-flex flex-column gap-2">
        <a href="{% url 'chnage_password' %}" class="btn btn-warning w-100 shadow-sm">
          <i class="bi bi-key-fill"></i> Change Password
        </a>
        <a href="{% url 'catagory_list' %}" class="btn btn-primary w-100 shadow-sm">
          <i class="bi bi-tags-fill"></i> Your Categories
        </a>
      </div>
    </div>
  </div>
</div>

<h3 class="mb-4 text-center fw-bold text-primary" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.1);">
  <i class="bi bi-box-seam"></i> My Inventories
</h3>

<div class="row row-cols-1 row-cols-md-3 g-4">
  {% for item in inventories %}
    <div class="col">
      <div class="card border-0 shadow-lg rounded-4 h-100 overflow-hidden hover-card" style="transition: transform 0.4s, box-shadow 0.4s;">
        <div class="card-body p-4" style="background: linear-gradient(145deg, #f8f9fa, #e9ecef);">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="card-title text-dark fw-bold mb-0" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.1);">
              {{ item.name }}
            </h5>
            <span class="badge 
              {% if item.priority == 'High' %}
                bg-danger
              {% elif item.priority == 'Medium' %}
                bg-warning text-dark
              {% else %}
                bg-success
              {% endif %} fw-semibold">
              {{ item.priority }}
            </span>
          </div>

          <ul class="list-unstyled mb-3" style="line-height: 1.8;">
            <li><i class="bi bi-layers-fill text-primary"></i> <strong>Quantity:</strong> {{ item.number_of_list }}</li>
            <li><i class="bi bi-person-circle text-success"></i> <strong>Owner:</strong> {{ item.user.username }}</li>
            <li><i class="bi bi-tags-fill text-warning"></i> <strong>Categories:</strong>
              {% for c in item.catagory.all %}
                <span class="badge bg-info text-dark me-1">{{ c.name }}</span>
              {% empty %}
                <span class="text-muted">None</span>
              {% endfor %}
            </li>
            <li><i class="bi bi-calendar-check-fill text-secondary"></i> <strong>Updated at:</strong> {{ item.date }}</li>
          </ul>
        </div>

        {% if item.user == request.user %}
        <div class="card-footer bg-gradient text-center py-3 border-0" style="background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%);">
          <a href="{% url 'edit_invebtory' item.id %}" class="btn btn-light btn-sm px-3 me-2 shadow-sm">
            <i class="bi bi-pencil-fill"></i> Edit
          </a>
          <a href="{% url 'delete_inv' item.id %}" class="btn btn-danger btn-sm px-3 shadow-sm"
             onclick="return confirm('Are you sure you want to delete this item?');">
            <i class="bi bi-trash-fill"></i> Delete
          </a>
        </div>
        {% endif %}
      </div>
    </div>
  {% empty %}
    <div class="text-center py-5">
      <i class="bi bi-box2-heart fs-1 text-secondary"></i>
      <p class="mt-3 fs-5 text-muted">No inventories available.</p>
    </div>
  {% endfor %}
</div>

<style>
  .hover-card:hover {
    transform: translateY(-8px) scale(1.03);
    box-shadow: 0 15px 25px rgba(0,0,0,0.2);
  }

  .card-footer a:hover {
    transform: translateY(-2px);
    transition: all 0.3s ease;
  }
</style>
{% endblock %}
